<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title></title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
  <!-- Bootstrap core CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet">
  <style type="text/css">
  .pt-3-half {
        padding-top: 1.4rem;
    }

    .input-group {
        width: 500px;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);

        background-color: #F1F1F1;
 }
 .row{
     margin-top: 10%;
     margin-left: 10%;
     margin-right: 10%;
}
button{
    display:inline-block;
    padding: 0.4em;
    margin: 0.5em;
    border:0.16em solid rgba(255,255,255,0);
    border-radius:2em;
    box-sizing: border-box;
    text-decoration:none;
    font-family:'Roboto',sans-serif;
    font-weight:300;
    color:#FFFFFF;
    text-shadow: 0 0.04em 0.04em rgba(0,0,0,0.35);
    text-align:center;
    color: black;
    transition: all 0.2s;
}
button:hover{
    border-color: rgba(255,255,255,1);
}
@media all and (max-width:30em){
    button{
        display:block;
        margin:0.2em auto;
}
}
.category-item{
    border-color:#f14e4e;
    }
.dish-name{
    border-color:#f1bb4e;
    }
.price{
    border-color:#4e9af1;
    }
.description{
    border-color:#90ee90;
    }
  </style>
  </head>
<body>
  <!-- Navbar -->
<nav class="navbar fixed-top navbar-expand-lg navbar-light white scrolling-navbar">
    <div class="container">

        <!-- Brand -->
        <a class="navbar-brand pt-0 waves-effect" href="/">
            Diner Menu Digitization With OCR
        </a>
        </div>

</nav>
<!-- Navbar -->
  <div class="card">
      <h3 class="card-header text-center font-weight-bold text-uppercase py-4">Editable table</h3>
      <div class="card-body">
          <div id="table" class="table-editable">
              <span class="table-add float-right mb-3 mr-2"><a data-toggle="modal" data-target="#addNewDishModal" class="text-success"><i class="fas fa-plus fa-2x" aria-hidden="true"></i></a></span>
              <table class="table table-bordered table-responsive-md table-striped text-center">
                  <thead>
                  <tr>
                      <th class="text-center">Category</th>
                      <th class="text-center">Name</th>
                      <th class="text-center">Description</th>
                      <th class="text-center">Price</th>
                      <th class="text-center">Actions</th>
                  </tr>
                  </thead>
                  <tbody>
                  <div th:if="${menu}">

                      <th:block th:each="category : ${menu.menuCategories}">
                          <th:block th:each="dish : ${category.dishes}">
                              <tr>
                                  <td class="pt-3-half" th:text="${category.name}" th:value="${category.name}"></td>
                                  <td class="pt-3-half" th:text="${dish.name}" th:value="${dish.name}"></td>
                                  <td class="pt-3-half" th:text="${dish.description}" th:value="${dish.description}"></td>
                                  <td class="pt-3-half" th:text="${dish.price}" th:value="${dish.price}"></td>
                                  <td>
                                      <span><button type="button" class="btn btn-success btn-rounded btn-sm my-0" data-toggle="modal" data-target="#editModal" th:data-id="${dish.dishID}" th:data-category="${category.categoryID}" th:data-name="${dish.name}" th:data-description="${dish.description}" th:data-price="${dish.price}" onclick="loadValues(this)">Edit</button></span>
                                      <span><button type="button" class="btn btn-danger btn-rounded btn-sm my-0" data-toggle="modal" data-target="#confirmModal" th:data-id="${dish.dishID}" th:data-category="${category.categoryID}" onclick="deleteItem(this)">Remove</button></span>
                                  </td>


                              </tr>
                          </th:block>
                  <!-- This is our clonable table line -->
                      </th:block>
                  </div>

                  </tbody>
              </table>
          </div>
      </div>
  </div>
<!--
  <div class="row">

      <div th:if="${menu}">

              <th:block th:each="category : ${menu.menuCategories}">
                  <button class="category-item" data-toggle="modal" data-target="#myModal" data-category="Category" th:id="${category.uniqueID}" th:text="${category.name}" th:value="${category.name}" onclick="loadValues(this)"></button>
                  <br>
                  <th:block th:each="dish : ${category.dishes}">
                      <button class="dish-name" data-toggle="modal" data-target="#myModal" data-category="Name" th:id="${dish.uniqueID}" th:text="${dish.name}" th:value="${dish.name}" onclick="loadValues(this)"></button>
                      <button class="price" data-toggle="modal" data-target="#myModal" data-category="Price" th:id="${category.uniqueID+dish.uniqueID+'p'}" th:text="${dish.price}" th:value="${dish.price}" onclick="loadValues(this)"></button>
                      <button class="description" data-toggle="modal" data-target="#myModal" data-category="Description" th:id="${category.uniqueID+dish.uniqueID+'d'}" th:text="${dish.description}" th:value="${dish.description}" onclick="loadValues(this)"></button>
                      <br>
                  </th:block>
                  <br>
              </th:block>
      </div>
  </div>
  -->
  <form action="/">
      <button type="submit" class="btn btn-secondary btn-lg btn-block btn-outline-dark">Submit</button>
  </form>
  <div class="modal fade" id="editModal" role="dialog">
      <div class="modal-dialog modal-lg">
          <div class="modal-dialog">

              <!-- Modal content-->
              <div class="modal-content">
                  <div class="modal-header">
                      <h4 class="modal-title">Update Menu Item</h4>
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body">
                      <form action="/edit-menu-item" method="post" enctype="multipart/form-data">
                          <input name="menuId" type="text" id="menuId" style="display:none;" th:value="${menuId}" \>
                          <input name = "dishId" type="text" id="id" style="display: none;" \>
                          <input name = "categoryId" type="text" id="categoryId" style="display: none;" \>
                          <div class="form-group">
                              <label>Category</label>
                              <select name="category" id="item-category" class="form-control">
                                  <th:block th:each="category : ${menu.menuCategories}">
                                      <option th:value="${category.categoryID}" th:text="${category.name}"></option>
                                  </th:block>
                              </select>
                          </div>
                          <div class="form-group">
                              <label>Name</label>
                              <input name="name" id="item-name" class="form-control" type = "text"></input>
                          </div>
                          <div class="form-group">
                              <label>Description</label>
                              <input name="description" id="item-description" class="form-control" type = "text"></input>
                          </div>
                          <div class="form-group">
                              <label>Price</label>
                              <input name="price" id="item-price" class="form-control" type = "text"></input>
                          </div>
                          <button class="btn btn-info" id = "save" type="submit">Save</button>
                      </form>
                  </div>
              </div>
          </div>
      </div>
  </div>
  <div class="modal fade" id="addNewDishModal" role="dialog">
      <div class="modal-dialog modal-lg">
          <div class="modal-dialog">

              <!-- Modal content-->
              <div class="modal-content">
                  <div class="modal-header">
                      <h4 class="modal-title">Add New Menu Item</h4>
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body">
                      <form action="/add-menu-item" method="post" enctype="multipart/form-data">
                          <input name="menuId" type="text" style="display:none;" th:value="${menuId}" \>
                          <div class="form-group">
                              <label>Category</label>
                              <select name="category" class="form-control">
                                  <th:block th:each="category : ${menu.menuCategories}">
                                      <option th:value="${category.categoryID}" th:text="${category.name}"></option>
                                  </th:block>
                              </select>
                          </div>
                          <div class="form-group">
                              <label>Name</label>
                              <input name="name" class="form-control" type = "text"></input>
                          </div>
                          <div class="form-group">
                              <label>Description</label>
                              <input name="description" class="form-control" type = "text"></input>
                          </div>
                          <div class="form-group">
                              <label>Price</label>
                              <input name="price" class="form-control" type = "text"></input>
                          </div>
                          <button class="btn btn-info" type="submit">Save</button>
                      </form>
                  </div>
              </div>
          </div>
      </div>
  </div>
  <div class="modal fade" id="confirmModal" role="dialog">
      <div class="modal-dialog modal-lg">
          <div class="modal-dialog">

              <!-- Modal content-->
              <div class="modal-content">
                  <div class="modal-header">
                      <h4 class="modal-title">Delete Menu Item</h4>
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body">
                      <form action="/delete-menu-item" method="post" enctype="multipart/form-data">
                          <div class="form-control">
                              Are you sure to delete this item?
                          </div>
                          <input name = "dishId" id="deletedDishId" type="text" style="display: none;" \>
                          <input name="menuId" type="text" style="display:none;" th:value="${menuId}" \>
                          <button class="btn btn-info" type="submit">Yes</button>
                      </form>
                  </div>
              </div>
          </div>
      </div>
  </div>
  <script>
      var btnSubmit = document.getElementById("save")
      btnSubmit.addEventListener("submit",
       function(event){ event.preventDefault()
});
  </script>
  <script>
  function deleteItem(btn){
        var id = btn.getAttribute("data-id");
        var element = document.getElementById("deletedDishId");
        element.value = id;

  }
  </script>
  <script>
    function loadValues(btn){
        document.getElementById("id").value = btn.getAttribute("data-id");
        document.getElementById("item-category").value = btn.getAttribute("data-category");
        document.getElementById("item-name").value = btn.getAttribute("data-name");
        document.getElementById("item-description").value = btn.getAttribute("data-description");
        document.getElementById("item-price").value = btn.getAttribute("data-price");

    }
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>
<!-- NO JS ADDED YET -->
<script id="__bs_script__">//<![CDATA[
    document.write("<script async src='http://HOST:3000/browser-sync/browser-sync-client.js?v=2.26.7'><\/script>".replace("HOST", location.hostname));
//]]></script>

</body>
</html>